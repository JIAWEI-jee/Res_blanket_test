C51 COMPILER V9.56.0.0   TIMER                                                             12/21/2020 10:49:41 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN .\Objects\timer.obj
COMPILER INVOKED BY: C:\program_list\keil\C51\BIN\C51.EXE ..\Device\timer\timer.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(
                    -..\Device\LED;..\Device\system_digital_tube;..\Device\BEEP;..\Device\timer;..\Device\key;..\Device\uart;..\Device\adc) D
                    -EBUG OBJECTEXTEND PRINT(.\Listings\timer.lst) OBJECT(.\Objects\timer.obj)

line level    source

   1          #include "timer.h"
   2          #include "system_digital_tube.h"
   3          #include "Beep.h"
   4          #include "key.h"
   5          
   6          u8 systick_10ms = 0;
   7          u16 systick_2ms = 0;
   8          void timer_Init_Config ( void )
   9          {
  10   1              TCON1 = 0x00;                                           //Tx0定时器时钟为Fosc/12
  11   1              TMOD = 0x00;                                            //16位重装载定时器/计数器
  12   1              //定时10ms
  13   1              //反推初值  = 65536 - ((10/1000) / (1/(Fosc / Timer分频系数)))
  14   1              //                      = 65536 - ((10/1000) / (1/(16000000 / 12)))
  15   1              //                      = 65536 - 13333
  16   1              //                      = 0xCBEC
  17   1              // TH0 = 0xCB;
  18   1              // TL0 = 0xEB;                                                  //T0定时时间10ms  16MHZ
  19   1              TH0 = 0xF5;
  20   1              TL0 = 0x96;                                             //T0定时时间2ms  16MHZ
  21   1              TF0 = 0;//清除中断标志
  22   1              ET0 = 1;//打开T0中断
  23   1              TR0 = 1;//使能T0
  24   1      
  25   1      
  26   1      }
  27          void Timer0Interrupt ( void ) interrupt TIMER0_VECTOR
  28          {
  29   1              systick_2ms++;
  30   1              if ( ++systick_2ms % 5 == 0 )
  31   1              {
  32   2                      systick_10ms = 1;
  33   2                      key_handle();
  34   2              }
  35   1              if ( systick_2ms > 0xfff0 )
  36   1              {
  37   2                      systick_2ms = 0;
  38   2              }
  39   1              digital_tube_timer_handle ( tube_num );
  40   1              TF0 = 0;//清除中断标志
  41   1              //具体代码
  42   1      }
  43          
  44          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    165    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      3    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.56.0.0   TIMER                                                             12/21/2020 10:49:41 PAGE 2   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
